(function(e){function t(t){for(var r,o,i=t[0],s=t[1],u=t[2],d=0,b=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&b.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(b.length)b.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/kzs/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"041d":function(e,t,n){"use strict";n("6ca0")},"0e21":function(e,t,n){},2004:function(e,t,n){},2906:function(e,t,n){"use strict";n("e790")},"2b89":function(e,t,n){},"49f8":function(e,t,n){var r={"./de.json":"6ce2","./en.json":"edd4"};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id="49f8"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={class:"q-pa-md row justify-center"},c={key:0,class:"page"},o={key:1};function i(e,t,n,i,s,u){var l=Object(r["G"])("HeaderView"),d=Object(r["G"])("q-header"),b=Object(r["G"])("ErrorView"),m=Object(r["G"])("NoServerView"),j=Object(r["G"])("q-page-container"),O=Object(r["G"])("FooterView"),p=Object(r["G"])("q-footer"),f=Object(r["G"])("q-layout");return Object(r["z"])(),Object(r["g"])(f,{view:"lHh Lpr fFf"},{default:Object(r["N"])((function(){return[Object(r["l"])(d,{elevated:"",class:"glossy text-center"},{default:Object(r["N"])((function(){return[Object(r["l"])(l)]})),_:1}),Object(r["l"])(j,null,{default:Object(r["N"])((function(){return[Object(r["j"])("div",a,[e.has_server?(Object(r["z"])(),Object(r["i"])("div",c,[Object(r["l"])(b),(Object(r["z"])(),Object(r["g"])(Object(r["I"])(u.currentComponent)))])):(Object(r["z"])(),Object(r["i"])("div",o,[Object(r["l"])(m)]))])]})),_:1}),Object(r["l"])(p,{class:"glossy text-center q-pa-sm items-center"},{default:Object(r["N"])((function(){return[Object(r["l"])(O)]})),_:1})]})),_:1})}var s=n("5530"),u=n("5502"),l=n("5a0c"),d=n.n(l),b=n("0ecf"),m=n.n(b),j=n("1953"),O=n.n(j),p=n("83dc"),f=n.n(p);d.a.extend(m.a),d.a.extend(O.a),d.a.extend(f.a);var h=d.a;function g(e,t,n,a,c,o){var i=Object(r["G"])("q-banner"),s=Object(r["G"])("q-btn");return Object(r["z"])(),Object(r["i"])(r["a"],null,[c.remainingTime>0?(Object(r["z"])(),Object(r["g"])(i,{key:0,rounded:"",class:"bg-warning q-mb-sm"},{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.$t("connecting",{time:c.remainingTime})),1)]})),_:1})):Object(r["h"])("",!0),Object(r["l"])(i,{"inline-actions":"",rounded:"",class:"bg-red text-white"},{action:Object(r["N"])((function(){return[Object(r["l"])(s,{label:e.$t("reload"),icon:"loop",onClick:o.reload},null,8,["label","onClick"])]})),default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.$t("no-server"))+" ",1)]})),_:1})],64)}var w={data:function(){return{remainingTime:10,intervalId:null}},computed:Object(s["a"])({},Object(u["c"])(["has_server"])),methods:{reload:function(){location.reload()}},mounted:function(){var e=this;this.intervalId=setInterval((function(){e.remainingTime>0&&(e.remainingTime--,e.has_server&&clearInterval(e.intervalId))}),1e3)}},_=n("6b0d"),v=n.n(_),y=n("54e1"),k=n("9c40"),G=n("93dc"),z=n.n(G);const N=v()(w,[["render",g]]);var S=N;z()(w,"components",{QBanner:y["a"],QBtn:k["a"]});n("b0c0");var x=Object(r["k"])("Knickzettelspiel");function C(e,t,n,a,c,o){var i=Object(r["G"])("q-tooltip"),s=Object(r["G"])("q-btn"),u=Object(r["G"])("q-toolbar-title"),l=Object(r["G"])("LocaleSelector"),d=Object(r["G"])("q-chip"),b=Object(r["G"])("q-toolbar");return Object(r["z"])(),Object(r["g"])(b,null,{default:Object(r["N"])((function(){return[o.hasBack?(Object(r["z"])(),Object(r["g"])(s,{key:0,flat:"",round:"",dense:"",icon:"arrow_back",onClick:o.onBack},{default:Object(r["N"])((function(){return[Object(r["l"])(i,null,{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.$t("back")),1)]})),_:1})]})),_:1},8,["onClick"])):Object(r["h"])("",!0),Object(r["l"])(u,null,{default:Object(r["N"])((function(){return[x]})),_:1}),Object(r["l"])(l),o.hasLogout?(Object(r["z"])(),Object(r["i"])(r["a"],{key:1},[Object(r["l"])(d,{color:"white",icon:"account_circle"},{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.currentUser.name),1)]})),_:1}),Object(r["l"])(s,{flat:"",round:"",dense:"",icon:"logout",onClick:o.onLogout},{default:Object(r["N"])((function(){return[Object(r["l"])(i,null,{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.$t("logout")),1)]})),_:1})]})),_:1},8,["onClick"])],64)):Object(r["h"])("",!0)]})),_:1})}function q(e,t,n,a,c,o){var i=Object(r["G"])("q-item-label"),s=Object(r["G"])("q-item-section"),u=Object(r["G"])("q-item"),l=Object(r["G"])("q-list"),d=Object(r["G"])("q-popup-proxy"),b=Object(r["G"])("q-chip"),m=Object(r["H"])("close-popup");return Object(r["z"])(),Object(r["i"])("div",null,[Object(r["l"])(b,{clickable:"",label:e.$i18n.locale,class:"bg-white text-black",icon:"language"},{default:Object(r["N"])((function(){return[Object(r["l"])(d,null,{default:Object(r["N"])((function(){return[Object(r["O"])(Object(r["l"])(l,null,{default:Object(r["N"])((function(){return[(Object(r["z"])(!0),Object(r["i"])(r["a"],null,Object(r["F"])(o.otherLocales,(function(e){return Object(r["z"])(),Object(r["g"])(u,{key:e,clickable:"",onClick:function(t){return o.setLocale(e)}},{default:Object(r["N"])((function(){return[Object(r["l"])(s,null,{default:Object(r["N"])((function(){return[Object(r["l"])(i,null,{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1},512),[[m]])]})),_:1})]})),_:1},8,["label"])])}n("4de4"),n("d3b7");var E={computed:{otherLocales:function(){var e=this;return this.$i18n.availableLocales.filter((function(t){return t!=e.$i18n.locale}))}},methods:{setLocale:function(e){sessionStorage.setItem("currentLocal",e),this.$i18n.locale=e,h.locale(e)}}},Q=(n("2906"),n("b047")),U=n("7cbe"),$=n("1c1c"),V=n("66e5"),I=n("4074"),P=n("0170"),L=n("7f67");const R=v()(E,[["render",q],["__scopeId","data-v-5af1fe48"]]);var B=R;z()(E,"components",{QChip:Q["a"],QPopupProxy:U["a"],QList:$["a"],QItem:V["a"],QItemSection:I["a"],QItemLabel:P["a"]}),z()(E,"directives",{ClosePopup:L["a"]});var K={computed:Object(s["a"])(Object(s["a"])({},Object(u["c"])(["currentUser","state"])),{},{hasBack:function(){return"showGame"==this.state},hasLogout:function(){return"login"!=this.state}}),methods:{onBack:function(){if("showGame"==this.state)return this.$store.commit("listGames")},onLogout:function(){if("login"!=this.state)return this.$store.dispatch("logout"),this.$store.commit("logout")}},components:{LocaleSelector:B}},T=n("65c6"),H=n("05c0"),F=n("6ac5");const J=v()(K,[["render",C]]);var A=J;z()(K,"components",{QToolbar:T["a"],QBtn:k["a"],QTooltip:H["a"],QToolbarTitle:F["a"],QChip:Q["a"]});var M=Object(r["k"])(" © F. Hekhorn 2021-2022 "),D=Object(r["j"])("a",{target:"_blank",href:"https://github.com/felixhekhorn/kzs"},[Object(r["j"])("img",{src:"img/GitHub-Mark-32px.png",alt:"GitHub",style:{"max-height":"17px","vertical-align":"text-bottom"}})],-1);function Z(e,t,n,a,c,o){return Object(r["z"])(),Object(r["i"])(r["a"],null,[M,D,Object(r["k"])(" v"+Object(r["K"])(o.version),1)],64)}var W={computed:{version:function(){return"0.3.2"}}};const X=v()(W,[["render",Z]]);var Y=X;function ee(e,t,n,a,c,o){var i=Object(r["G"])("q-banner");return e.currentError?(Object(r["z"])(),Object(r["g"])(i,{key:0,rounded:"",class:"bg-red text-white q-mb-sm"},{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.currentError),1)]})),_:1})):Object(r["h"])("",!0)}var te={computed:Object(s["a"])({},Object(u["c"])(["currentError"]))};const ne=v()(te,[["render",ee]]);var re=ne;function ae(e,t,n,a,c,o){var i=Object(r["G"])("q-banner"),s=Object(r["G"])("q-icon"),u=Object(r["G"])("q-input"),l=Object(r["G"])("q-card-section"),d=Object(r["G"])("q-btn"),b=Object(r["G"])("q-card-actions"),m=Object(r["G"])("q-card"),j=Object(r["G"])("q-expansion-item"),O=Object(r["G"])("q-list");return Object(r["z"])(),Object(r["i"])(r["a"],null,[Object(r["l"])(i,{class:"bg-warning q-mb-sm"},{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.$t("is-alpha")),1)]})),_:1}),Object(r["l"])(O,{bordered:"",class:"rounded-borders"},{default:Object(r["N"])((function(){return[Object(r["l"])(j,{group:"login_type","expand-separator":"",icon:"account_circle",label:e.$t("login"),"default-opened":""},{default:Object(r["N"])((function(){return[Object(r["l"])(m,null,{default:Object(r["N"])((function(){return[Object(r["l"])(l,null,{default:Object(r["N"])((function(){return[Object(r["l"])(u,{modelValue:c.user_name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.user_name=e}),placeholder:e.$t("username")},{prepend:Object(r["N"])((function(){return[Object(r["l"])(s,{round:"",name:"account_circle"})]})),_:1},8,["modelValue","placeholder"]),Object(r["l"])(u,{modelValue:c.user_password,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.user_password=e}),type:c.showPassword?"password":"text",placeholder:e.$t("password")},{prepend:Object(r["N"])((function(){return[Object(r["l"])(s,{round:"",name:"password"})]})),append:Object(r["N"])((function(){return[Object(r["l"])(s,{name:c.showPassword?"visibility_off":"visibility",onClick:t[1]||(t[1]=function(e){return c.showPassword=!c.showPassword})},null,8,["name"])]})),_:1},8,["modelValue","type","placeholder"])]})),_:1}),Object(r["l"])(b,{align:"right"},{default:Object(r["N"])((function(){return[Object(r["l"])(d,{onClick:o.onLogin,"icon-right":"login"},{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.$t("login")),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["label"]),Object(r["l"])(j,{group:"login_type","expand-separator":"",icon:"person_add",label:e.$t("register")},{default:Object(r["N"])((function(){return[Object(r["l"])(m,null,{default:Object(r["N"])((function(){return[Object(r["l"])(l,null,{default:Object(r["N"])((function(){return[Object(r["l"])(u,{modelValue:c.user_name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.user_name=e}),placeholder:e.$t("username")},{prepend:Object(r["N"])((function(){return[Object(r["l"])(s,{round:"",name:"account_circle"})]})),_:1},8,["modelValue","placeholder"]),Object(r["l"])(u,{modelValue:c.user_password_1,"onUpdate:modelValue":t[5]||(t[5]=function(e){return c.user_password_1=e}),type:c.showPassword1?"password":"text",placeholder:e.$t("password")},{prepend:Object(r["N"])((function(){return[Object(r["l"])(s,{round:"",name:"password"})]})),append:Object(r["N"])((function(){return[Object(r["l"])(s,{name:c.showPassword1?"visibility_off":"visibility",onClick:t[4]||(t[4]=function(e){return c.showPassword1=!c.showPassword1})},null,8,["name"])]})),_:1},8,["modelValue","type","placeholder"]),Object(r["l"])(u,{modelValue:c.user_password_2,"onUpdate:modelValue":t[7]||(t[7]=function(e){return c.user_password_2=e}),type:c.showPassword2?"password":"text",placeholder:e.$t("password")},{prepend:Object(r["N"])((function(){return[Object(r["l"])(s,{round:"",name:"password"})]})),append:Object(r["N"])((function(){return[Object(r["l"])(s,{name:c.showPassword2?"visibility_off":"visibility",onClick:t[6]||(t[6]=function(e){return c.showPassword2=!c.showPassword2})},null,8,["name"])]})),_:1},8,["modelValue","type","placeholder"])]})),_:1}),Object(r["l"])(b,{align:"right"},{default:Object(r["N"])((function(){return[Object(r["l"])(d,{"icon-right":"login",onClick:o.onRegister},{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.$t("register")),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1},8,["label"])]})),_:1})],64)}z()(te,"components",{QBanner:y["a"]});n("498a");var ce={data:function(){return{user_name:"",user_password:"",user_password_1:"",user_password_2:"",showPassword:!0,showPassword1:!0,showPassword2:!0}},methods:{onLogin:function(){this.user_name=this.user_name.trim(),this.user_password=this.user_password.trim(),this.user_name&&this.user_password&&this.$store.dispatch("login",{user_name:this.user_name,user_password:this.user_password})},onRegister:function(){this.user_name=this.user_name.trim(),this.$store.dispatch("newUser",{user_name:this.user_name,user_password_1:this.user_password_1,user_password_2:this.user_password_2})}}},oe=n("3b73"),ie=n("f09f"),se=n("a370"),ue=n("27f9"),le=n("0016"),de=n("4b7e");const be=v()(ce,[["render",ae]]);var me=be;z()(ce,"components",{QBanner:y["a"],QList:$["a"],QExpansionItem:oe["a"],QCard:ie["a"],QCardSection:se["a"],QInput:ue["a"],QIcon:le["a"],QCardActions:de["a"],QBtn:k["a"]});var je=Object(r["k"])(" Keine Spiele gefunden. ");function Oe(e,t,n,a,c,o){var i=Object(r["G"])("ListHead"),s=Object(r["G"])("GameHeadView"),u=Object(r["G"])("q-list"),l=Object(r["G"])("q-banner");return Object(r["z"])(),Object(r["i"])(r["a"],null,[Object(r["l"])(i),o.hasGames?(Object(r["z"])(),Object(r["g"])(u,{key:0,separator:""},{default:Object(r["N"])((function(){return[(Object(r["z"])(!0),Object(r["i"])(r["a"],null,Object(r["F"])(e.games,(function(e){return Object(r["z"])(),Object(r["g"])(s,{key:e.id,game:e,mode:"list"},null,8,["game"])})),128))]})),_:1})):(Object(r["z"])(),Object(r["g"])(l,{key:1,rounded:"",class:"bg-grey-3"},{default:Object(r["N"])((function(){return[je]})),_:1}))],64)}n("ddb0");var pe={class:"q-ml-sm"},fe={class:"q-ml-sm"};function he(e,t,n,a,c,o){var i=Object(r["G"])("q-avatar"),s=Object(r["G"])("q-item-section"),u=Object(r["G"])("q-item-label"),l=Object(r["G"])("PlayerList"),d=Object(r["G"])("q-icon"),b=Object(r["G"])("q-btn"),m=Object(r["G"])("q-card-section"),j=Object(r["G"])("q-card-actions"),O=Object(r["G"])("q-card"),p=Object(r["G"])("q-dialog"),f=Object(r["G"])("q-tooltip"),h=Object(r["G"])("q-chip"),g=Object(r["G"])("q-popup-proxy"),w=Object(r["G"])("q-item"),_=Object(r["H"])("close-popup");return Object(r["z"])(),Object(r["g"])(w,{onClick:o.onClick,clickable:""},{default:Object(r["N"])((function(){return[Object(r["l"])(s,{top:"",avatar:"",dense:""},{default:Object(r["N"])((function(){return[Object(r["l"])(i,{icon:o.avatar},null,8,["icon"])]})),_:1}),Object(r["l"])(s,null,{default:Object(r["N"])((function(){return[Object(r["l"])(u,null,{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(n.game.title),1)]})),_:1}),Object(r["l"])(u,{caption:"",lines:"2"},{default:Object(r["N"])((function(){return[Object(r["l"])(l,{game:n.game},null,8,["game"]),Object(r["l"])(d,{name:"article"}),Object(r["k"])(" "+Object(r["K"])(n.game.entries.length)+" ",1),Object(r["l"])(d,{name:"event"}),Object(r["k"])(" "+Object(r["K"])(e.$d(o.ctime.toDate(),o.ctimeFormat)),1)]})),_:1})]})),_:1}),"list"==n.mode?(Object(r["z"])(),Object(r["g"])(s,{key:0,side:"",top:""},{default:Object(r["N"])((function(){return[o.canStart?(Object(r["z"])(),Object(r["g"])(b,{key:0,onClick:o.onShowStart,round:"",icon:"start"},null,8,["onClick"])):Object(r["h"])("",!0),Object(r["l"])(p,{modelValue:c.showStart,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.showStart=e})},{default:Object(r["N"])((function(){return[Object(r["l"])(O,null,{default:Object(r["N"])((function(){return[Object(r["l"])(m,{class:"row items-center"},{default:Object(r["N"])((function(){return[Object(r["l"])(i,{icon:"play_arrow",color:"primary","text-color":"white"}),Object(r["j"])("span",pe,Object(r["K"])(e.$t("really-start",{title:n.game.title})),1)]})),_:1}),Object(r["l"])(j,{align:"right"},{default:Object(r["N"])((function(){return[Object(r["O"])(Object(r["l"])(b,{label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[_]]),Object(r["O"])(Object(r["l"])(b,{label:e.$t("start"),color:"primary",onClick:o.onStart},null,8,["label","onClick"]),[[_]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})):Object(r["h"])("",!0),"show"==n.mode&&o.canEnd?(Object(r["z"])(),Object(r["g"])(s,{key:1,side:"",top:""},{default:Object(r["N"])((function(){return[Object(r["l"])(b,{onClick:o.onShowEnd,round:"",icon:"flag"},null,8,["onClick"]),Object(r["l"])(p,{modelValue:c.showEnd,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.showEnd=e})},{default:Object(r["N"])((function(){return[Object(r["l"])(O,null,{default:Object(r["N"])((function(){return[Object(r["l"])(m,{class:"row items-center"},{default:Object(r["N"])((function(){return[Object(r["l"])(i,{icon:"flag",color:"primary","text-color":"white"}),Object(r["j"])("span",fe,Object(r["K"])(e.$t("really-end",{title:n.game.title})),1)]})),_:1}),Object(r["l"])(j,{align:"right"},{default:Object(r["N"])((function(){return[Object(r["O"])(Object(r["l"])(b,{label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[_]]),Object(r["O"])(Object(r["l"])(b,{label:e.$t("end"),color:"primary",onClick:o.onEnd},null,8,["label","onClick"]),[[_]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})):Object(r["h"])("",!0),o.canShare?(Object(r["z"])(),Object(r["g"])(s,{key:2,side:"",top:""},{default:Object(r["N"])((function(){return[Object(r["l"])(b,{onClick:t[2]||(t[2]=Object(r["P"])((function(){}),["stop"])),round:"",icon:"share"},{default:Object(r["N"])((function(){return[Object(r["l"])(f,{anchor:"center left",self:"center end"},{default:Object(r["N"])((function(){return[Object(r["k"])(Object(r["K"])(e.$t("share")),1)]})),_:1}),Object(r["l"])(g,null,{default:Object(r["N"])((function(){return[Object(r["O"])(Object(r["l"])(h,{label:n.game.slug,icon:"key",clickable:"",onClick:o.onCopySlug},null,8,["label","onClick"]),[[_]])]})),_:1})]})),_:1})]})),_:1})):Object(r["h"])("",!0)]})),_:1},8,["onClick"])}var ge=Object(r["k"])("  ");function we(e,t,n,a,c,o){var i=Object(r["G"])("q-icon");return Object(r["z"])(),Object(r["i"])(r["a"],null,[Object(r["l"])(i,{name:"people"}),ge,(Object(r["z"])(!0),Object(r["i"])(r["a"],null,Object(r["F"])(n.game.players,(function(t){return Object(r["z"])(),Object(r["i"])("span",{key:t.id,class:Object(r["u"])(o.playerClasses[t.id])},Object(r["K"])(e.users[t.user_id].name),3)})),128))],64)}var _e=n("2909"),ve=(n("159b"),n("99af"),{props:{game:Object},computed:Object(s["a"])(Object(s["a"])({},Object(u["c"])(["users"])),{},{playerClasses:function(){var e=this,t={};return this.game.players.forEach((function(n){var r=["Player"];"finished"!=e.game.state&&e.game.next_player_user_id==n.user_id&&(r=[].concat(Object(_e["a"])(r),["ActivePlayer"])),t[n.id]=r})),t}}),methods:{}});n("5f41");const ye=v()(ve,[["render",we],["__scopeId","data-v-2251c257"]]);var ke=ye;z()(ve,"components",{QIcon:le["a"]});var Ge={data:function(){return{showStart:!1,showEnd:!1}},props:{game:Object,mode:String},computed:Object(s["a"])({ctime:function(){return h.utc(this.game.ctime+"Z")},ctimeFormat:function(){return this.ctime.isToday()?"time":"date"},avatar:function(){return"running"==this.game.state?"play_arrow":"init"==this.game.state?"not_started":"finished"==this.game.state?"flag":""},canStart:function(){return"init"==this.game.state&&this.game.user_id==this.currentUser.id&&this.game.players.length>=3},canOpen:function(){return"init"!=this.game.state},canShare:function(){return"finished"!=this.game.state},canEnd:function(){return this.game.user_id==this.currentUser.id&&"running"==this.game.state}},Object(u["c"])(["currentUser"])),methods:{onStart:function(){this.$store.dispatch("startGame",this.game.id)},onCopySlug:function(){navigator.clipboard.writeText(this.game.slug)},onShowEnd:function(){this.showEnd=!this.showEnd},onShowStart:function(){this.showStart=!this.showStart},onEnd:function(){this.$store.dispatch("endGame")},onClick:function(){"list"==this.mode&&this.canOpen&&this.$store.commit("openGame",this.game.id)}},components:{PlayerList:ke}},ze=n("cb32"),Ne=n("24e8");const Se=v()(Ge,[["render",he]]);var xe=Se;z()(Ge,"components",{QItem:V["a"],QItemSection:I["a"],QAvatar:ze["a"],QItemLabel:P["a"],QIcon:le["a"],QBtn:k["a"],QDialog:Ne["a"],QCard:ie["a"],QCardSection:se["a"],QCardActions:de["a"],QTooltip:H["a"],QPopupProxy:U["a"],QChip:Q["a"]}),z()(Ge,"directives",{ClosePopup:L["a"]});var Ce={class:"q-mb-sm"},qe={key:0},Ee={key:1};function Qe(e,t,n,a,c,o){var i=Object(r["G"])("q-btn"),s=Object(r["G"])("q-btn-group"),u=Object(r["G"])("q-icon"),l=Object(r["G"])("q-input");return Object(r["z"])(),Object(r["i"])("div",Ce,[Object(r["l"])(s,{rounded:""},{default:Object(r["N"])((function(){return[Object(r["l"])(i,{rounded:"",icon:"add",label:e.$t("new"),color:c.showingNew?"primary":"white","text-color":c.showingNew?"white":"black",onClick:o.onShowNew},null,8,["label","color","text-color","onClick"]),Object(r["l"])(i,{rounded:"",icon:"link",label:e.$t("join"),color:c.showingJoin?"primary":"white","text-color":c.showingJoin?"white":"black",onClick:o.onShowJoin},null,8,["label","color","text-color","onClick"]),Object(r["l"])(i,{rounded:"",icon:"refresh",label:e.$t("refresh"),onClick:o.loadGames},null,8,["label","onClick"])]})),_:1}),c.showingNew?(Object(r["z"])(),Object(r["i"])("div",qe,[Object(r["l"])(l,{modelValue:c.newTitle,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.newTitle=e}),placeholder:e.$t("gametitle")},{prepend:Object(r["N"])((function(){return[Object(r["l"])(u,{round:"",name:"title"})]})),append:Object(r["N"])((function(){return[Object(r["l"])(i,{onClick:o.onNewGame,round:"",icon:"send"},null,8,["onClick"])]})),_:1},8,["modelValue","placeholder"])])):Object(r["h"])("",!0),c.showingJoin?(Object(r["z"])(),Object(r["i"])("div",Ee,[Object(r["l"])(l,{modelValue:c.joinSlug,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.joinSlug=e}),placeholder:e.$t("gameslug")},{prepend:Object(r["N"])((function(){return[Object(r["l"])(u,{round:"",name:"key"})]})),append:Object(r["N"])((function(){return[Object(r["l"])(i,{onClick:o.onJoinGame,round:"",icon:"search"},null,8,["onClick"])]})),_:1},8,["modelValue","placeholder"])])):Object(r["h"])("",!0)])}var Ue={data:function(){return{showingNew:!1,showingJoin:!1,newTitle:"",joinSlug:""}},methods:{onNewGame:function(){this.newTitle=this.newTitle.trim(),this.newTitle&&this.$store.dispatch("newGame",this.newTitle),this.newTitle=""},onJoinGame:function(){this.joinSlug=this.joinSlug.trim(),this.joinSlug&&this.$store.dispatch("joinGame",this.joinSlug),this.joinSlug=""},onShowNew:function(){this.showingNew=!this.showingNew},onShowJoin:function(){this.showingJoin=!this.showingJoin},loadGames:function(){this.$store.dispatch("loadGames")}}},$e=n("e7a9");const Ve=v()(Ue,[["render",Qe]]);var Ie=Ve;z()(Ue,"components",{QBtnGroup:$e["a"],QBtn:k["a"],QInput:ue["a"],QIcon:le["a"]});n("b64b");var Pe={methods:{isObjectEmpty:function(e){return!Object.keys(e).length}}},Le={props:{},mixins:[Pe],computed:Object(s["a"])(Object(s["a"])({},Object(u["c"])(["games"])),{},{hasGames:function(){return!this.isObjectEmpty(this.games)}}),components:{GameHeadView:xe,ListHead:Ie}};n("96cd");const Re=v()(Le,[["render",Oe],["__scopeId","data-v-f6b520ea"]]);var Be=Re;z()(Le,"components",{QList:$["a"],QBanner:y["a"]});var Ke={class:"GameView"},Te={class:"entries"},He={key:0};function Fe(e,t,n,a,c,o){var i=Object(r["G"])("EntryView"),s=Object(r["G"])("q-btn"),u=Object(r["G"])("q-input"),l=Object(r["G"])("GameHeadView"),d=Object(r["G"])("q-list"),b=Object(r["G"])("q-page-sticky");return Object(r["z"])(),Object(r["i"])("div",Ke,[Object(r["j"])("div",Te,[(Object(r["z"])(!0),Object(r["i"])(r["a"],null,Object(r["F"])(o.game.entries,(function(e){return Object(r["z"])(),Object(r["i"])("div",{key:e.id,class:"Entry"},[Object(r["l"])(i,{entry:e,visible:o.visibles[e.id]},null,8,["entry","visible"])])})),128)),o.canSend?(Object(r["z"])(),Object(r["i"])("div",He,[Object(r["l"])(u,{modelValue:c.message,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.message=e}),autogrow:"",placeholder:e.$t(o.inputPlaceholderKey),onKeyup:o.onKeyUp},{append:Object(r["N"])((function(){return[Object(r["l"])(s,{onClick:o.addEntry,round:"",icon:"send"},null,8,["onClick"])]})),_:1},8,["modelValue","placeholder","onKeyup"])])):Object(r["h"])("",!0)]),Object(r["l"])(b,{expand:"",position:"top"},{default:Object(r["N"])((function(){return[Object(r["l"])(d,{class:"gameHeadList bg-white text-center"},{default:Object(r["N"])((function(){return[Object(r["l"])(l,{game:o.game,mode:"show"},null,8,["game"])]})),_:1})]})),_:1})])}function Je(e,t,n,a,c,o){var i=Object(r["G"])("q-chat-message");return Object(r["z"])(),Object(r["g"])(i,Object(r["s"])({name:e.users[n.entry.user_id].name,text:o.body},o.sent,{stamp:e.$d(o.ctime.toDate(),"full")}),null,16,["name","text","stamp"])}var Ae={props:{entry:Object,visible:Boolean},computed:Object(s["a"])({ctime:function(){return h.utc(this.entry.ctime+"Z")},body:function(){return this.visible?[this.entry.body]:["..."]},sent:function(){return this.entry.user_id==this.currentUser.id?{sent:!0}:{}}},Object(u["c"])(["users","currentUser"])),methods:{}},Me=n("8169");const De=v()(Ae,[["render",Je]]);var Ze=De;z()(Ae,"components",{QChatMessage:Me["a"]});var We={data:function(){return{message:""}},computed:Object(s["a"])({visibles:function(){var e=this,t={};if(this.game.entries.forEach((function(n){t[n.id]="finished"==e.game.state})),this.game.entries.length>0&&this.canSend){var n=this.game.entries[this.game.entries.length-1];t[n.id]=!0}return t},canSend:function(){return this.game.next_player_user_id==this.currentUser.id&&"finished"!=this.game.state},inputPlaceholderKey:function(){return 0==this.game.entries.length?"placeholder-start":"placeholder-continue"},game:function(){return this.games[this.currentGameId]}},Object(u["c"])(["currentUser","currentGameId","games"])),methods:{addEntry:function(){this.message=this.message.trim(),this.message&&(sessionStorage.setItem("lastEntryBody",this.message),this.$store.dispatch("addEntry",this.message)),this.message=""},onKeyUp:function(){sessionStorage.setItem("lastEntryBody",this.message.trim())}},created:function(){var e=sessionStorage.getItem("lastEntryBody");e&&(this.message=e)},components:{EntryView:Ze,GameHeadView:xe}},Xe=(n("b140"),n("de5e"));const Ye=v()(We,[["render",Fe],["__scopeId","data-v-2e3bb9dc"]]);var et=Ye;z()(We,"components",{QInput:ue["a"],QBtn:k["a"],QPageSticky:Xe["a"],QList:$["a"]});var tt={computed:Object(s["a"])(Object(s["a"])({},Object(u["c"])(["has_server","state"])),{},{currentComponent:function(){return"showGame"==this.state?et:"listGames"==this.state?Be:me}}),beforeCreate:function(){this.$store.commit("readFromSession");var e=sessionStorage.getItem("currentLocal");e&&(this.$i18n.locale=e,h.locale(e))},created:function(){this.$store.dispatch("open")},components:{ErrorView:re,HeaderView:A,NoServerView:S,FooterView:Y}},nt=(n("041d"),n("4d5a")),rt=n("e359"),at=n("09e3"),ct=n("7ff0");const ot=v()(tt,[["render",i],["__scopeId","data-v-049d835f"]]);var it=ot;z()(tt,"components",{QLayout:nt["a"],QHeader:rt["a"],QPageContainer:at["a"],QFooter:ct["a"]});var st=n("1da1"),ut=(n("96cf"),n("e9c4"),!1),lt=Object(u["b"])({state:function(){return{connection:null,has_server:!1,currentError:"",state:"login",currentUser:{},games:{},users:{},currentGame:{}}},mutations:{setConnection:function(e,t){e.connection=t},setHasServer:function(e,t){e.has_server=t},setError:function(e,t){e.currentError=t},setUser:function(e,t){e.currentUser=t.user,sessionStorage.setItem("currentUser.id",e.currentUser.id)},setGames:function(e,t){e.games=Object(s["a"])(Object(s["a"])({},e.games),t.games),e.users=Object(s["a"])(Object(s["a"])({},e.users),t.users)},setEntry:function(e,t){var n=e.games[t.Entry.game_id];n.entries.push(t.Entry),n.next_player_user_id=t.next_player_user_id},listGames:function(e){e.state="listGames",e.currentGame=null,e.currentError=""},startedGame:function(e,t){e.games[t.game_id].state="running"},endedGame:function(e,t){e.games[t.game_id].state="finished"},openGame:function(e,t){e.state="showGame",e.currentGameId=t,e.currentError=""},logout:function(e){e.state="login",e.currentUser={},e.games={},e.users={},sessionStorage.setItem("currentUser.id","")},readFromSession:function(e){var t=sessionStorage.getItem("currentUser.id");t&&(e.currentUser={id:t})}},actions:{send:function(e,t){return Object(st["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,n.next=3,r.connection.send(JSON.stringify(t));case 3:case"end":return n.stop()}}),n)})))()},open:function(e){return Object(st["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:c=function(){if("felixhekhorn.github.io"===window.location.host)return"wss://kzs.herokuapp.com/";if("localhost:8080"===window.location.host)return"ws://localhost:8001/";if("192.168.1.80:8080"===window.location.host)return"ws://192.168.1.80:8001/";throw new Error("Unsupported host: ".concat(window.location.host))},n=e.state,r=e.dispatch,a=e.commit,o=new WebSocket(c()),o.addEventListener("message",(function(e){var t=JSON.parse(e.data);t.type&&r("parse",t)})),o.addEventListener("open",(function(){a("setHasServer",!0),Object.keys(n.currentUser).length&&r("registerUser")})),o.addEventListener("close",(function(){a("setHasServer",!1)})),a("setConnection",o);case 7:case"end":return t.stop()}}),t)})))()},parse:function(e,t){return Object(st["a"])(regeneratorRuntime.mark((function n(){var r,a,c,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.commit,c=e.dispatch,a("setError",""),"error"!=t.type){n.next=4;break}return n.abrupt("return",a("setError",t.body));case 4:if("loggedIn"!=t.type){n.next=8;break}return a("setUser",t),c("loadGames"),n.abrupt("return",a("listGames"));case 8:if("loadedGames"!=t.type&&"joinedGame"!=t.type&&"newGame"!=t.type){n.next=10;break}return n.abrupt("return",a("setGames",t));case 10:if("addEntry"!=t.type){n.next=13;break}return sessionStorage.setItem("lastEntryBody",""),n.abrupt("return",a("setEntry",t));case 13:if("startedGame"!=t.type){n.next=18;break}return a("startedGame",t),o=r.games[t.game_id],r.currentUser.id==o.user_id&&a("openGame",t.game_id),n.abrupt("return");case 18:if("endedGame"!=t.type){n.next=20;break}return n.abrupt("return",a("endedGame",t));case 20:case"end":return n.stop()}}),n)})))()},loadGames:function(e){return Object(st["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.dispatch,t.next=3,r("send",{type:"loadGames",user_id:n.currentUser.id});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},addEntry:function(e,t){return Object(st["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,n.next=3,a("send",{type:"addEntry",user_id:r.currentUser.id,game_id:r.currentGameId,body:t});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},startGame:function(e,t){return Object(st["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,n.next=3,a("send",{type:"startGame",user_id:r.currentUser.id,game_id:t});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},endGame:function(e){return Object(st["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.dispatch,t.next=3,r("send",{type:"endGame",user_id:n.currentUser.id,game_id:n.currentGameId});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},joinGame:function(e,t){return Object(st["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,n.next=3,a("send",{type:"joinGame",user_id:r.currentUser.id,game_slug:t});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},newGame:function(e,t){return Object(st["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,a=e.dispatch,n.next=3,a("send",{type:"newGame",user_id:r.currentUser.id,game_title:t});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},login:function(e,t){return Object(st["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,r("send",{type:"login",user_name:t.user_name,user_password:t.user_password});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},logout:function(e){return Object(st["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.dispatch,t.next=3,r("send",{type:"logout",user_id:n.currentUser.id});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},registerUser:function(e){return Object(st["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.dispatch,t.next=3,r("send",{type:"registerUser",user_id:n.currentUser.id});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},newUser:function(e,t){return Object(st["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,r("send",{type:"newUser",user_name:t.user_name,user_password_1:t.user_password_1,user_password_2:t.user_password_2});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}},strict:ut,plugins:ut?[Object(u["a"])()]:[]}),dt=n("b05d"),bt=(n("0e21"),n("e54f"),{config:{},plugins:{}}),mt=(n("ac1f"),n("466d"),n("47e2")),jt={time:{minute:"2-digit",hour:"2-digit"},date:{year:"2-digit",month:"2-digit",day:"2-digit"},full:{year:"2-digit",month:"2-digit",day:"2-digit",minute:"2-digit",hour:"2-digit"}},Ot={de:jt,en:jt};function pt(){var e=n("49f8"),t={};return e.keys().forEach((function(n){var r=n.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){var a=r[1];t[a]=e(n).default}})),t}var ft=Object(mt["a"])({legacy:!1,locale:"de",fallbackLocale:"de",messages:pt(),globalInjection:!0,datetimeFormats:Ot}),ht=Object(r["f"])(it);ht.use(ft),ht.use(dt["a"],bt),ht.use(lt),ht.mount("#app")},"5f41":function(e,t,n){"use strict";n("2004")},"65cc":function(e,t,n){},"6ca0":function(e,t,n){},"6ce2":function(e,t,n){"use strict";n.r(t),t["default"]={"no-server":e=>{const{normalize:t}=e;return t(["WebSocket-Server nicht verfügbar!"])},reload:e=>{const{normalize:t}=e;return t(["Neu laden"])},"is-alpha":e=>{const{normalize:t}=e;return t(["Das ist eine Alpha-Version!"])},login:e=>{const{normalize:t}=e;return t(["Anmelden"])},username:e=>{const{normalize:t}=e;return t(["Benutzername"])},password:e=>{const{normalize:t}=e;return t(["Passwort"])},register:e=>{const{normalize:t}=e;return t(["Registrieren"])},new:e=>{const{normalize:t}=e;return t(["Neu"])},join:e=>{const{normalize:t}=e;return t(["Beitreten"])},refresh:e=>{const{normalize:t}=e;return t(["Aktualisieren"])},gametitle:e=>{const{normalize:t}=e;return t(["Spieltitel"])},gameslug:e=>{const{normalize:t}=e;return t(["Spielkennung"])},"really-start":e=>{const{normalize:t,interpolate:n,named:r}=e;return t(['"',n(r("title")),'" starten?'])},cancel:e=>{const{normalize:t}=e;return t(["Abbrechen"])},start:e=>{const{normalize:t}=e;return t(["Starten"])},end:e=>{const{normalize:t}=e;return t(["Beenden"])},"really-end":e=>{const{normalize:t,interpolate:n,named:r}=e;return t(['"',n(r("title")),'" beenden?'])},logout:e=>{const{normalize:t}=e;return t(["Ausloggen"])},back:e=>{const{normalize:t}=e;return t(["Zurück"])},share:e=>{const{normalize:t}=e;return t(["Teilen"])},"placeholder-start":e=>{const{normalize:t}=e;return t(["Beginne die Geschichte, z.B. 'Es war einmal ...'"])},"placeholder-continue":e=>{const{normalize:t}=e;return t(["Setze die Geschichte fort, z.B. 'und dann geschah etwas Seltsames:'"])},connecting:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Verbine ... (versuche noch ",n(r("time"))," s - starte vermutlich Server)"])}}},"96cd":function(e,t,n){"use strict";n("65cc")},b140:function(e,t,n){"use strict";n("2b89")},e790:function(e,t,n){},edd4:function(e,t,n){"use strict";n.r(t),t["default"]={"no-server":e=>{const{normalize:t}=e;return t(["WebSocket server not reachable!"])},reload:e=>{const{normalize:t}=e;return t(["Reload"])},"is-alpha":e=>{const{normalize:t}=e;return t(["This is an alpha version!"])},login:e=>{const{normalize:t}=e;return t(["Login"])},username:e=>{const{normalize:t}=e;return t(["user name"])},password:e=>{const{normalize:t}=e;return t(["password"])},register:e=>{const{normalize:t}=e;return t(["Register"])},new:e=>{const{normalize:t}=e;return t(["New"])},join:e=>{const{normalize:t}=e;return t(["Join"])},refresh:e=>{const{normalize:t}=e;return t(["Refresh"])},gametitle:e=>{const{normalize:t}=e;return t(["game title"])},gameslug:e=>{const{normalize:t}=e;return t(["game key"])},"really-start":e=>{const{normalize:t,interpolate:n,named:r}=e;return t(['Start "',n(r("title")),'"?'])},cancel:e=>{const{normalize:t}=e;return t(["Cancel"])},start:e=>{const{normalize:t}=e;return t(["Start"])},end:e=>{const{normalize:t}=e;return t(["End"])},"really-end":e=>{const{normalize:t,interpolate:n,named:r}=e;return t(['End "',n(r("title")),'"?'])},logout:e=>{const{normalize:t}=e;return t(["Logout"])},back:e=>{const{normalize:t}=e;return t(["Back"])},share:e=>{const{normalize:t}=e;return t(["Share"])},"placeholder-start":e=>{const{normalize:t}=e;return t(["Begin the story, e.g, 'Once upon a time ...'"])},"placeholder-continue":e=>{const{normalize:t}=e;return t(["Continue the story, e.g., 'and then happened something strange'"])},connecting:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Connecting ... (keep trying for ",n(r("time"))," s - likely to start server)"])}}}});
//# sourceMappingURL=app.ce65ae4d.js.map